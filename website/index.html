<!doctype html>
<html lang="en" data-webtui-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x2692;</text></svg>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>slag - AI task orchestrator</title>
    <meta name="description" content="slag: Smelt ideas, skim the bugs, forge the product. Task orchestrator for AI-powered development using metallurgical metaphors, S-expression ingots, and proof-based verification." />
  </head>
  <body>
    <button id="copy-md-btn" class="copy-md-btn" title="Copy page as Markdown for AI">Copy as Markdown</button>
    <div id="app">

      <!-- S1: HERO -->
      <header class="forge-header" box="double" style="padding: 2ch 3ch; margin-bottom: 3lh;">
        <!-- Forge Effects Layer -->
        <div class="forge-effects" aria-hidden="true">
          <svg class="forge-glow-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="edge-glow-h" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="transparent"/>
                <stop offset="20%" stop-color="var(--slag-hot)"/>
                <stop offset="50%" stop-color="var(--slag-bright)"/>
                <stop offset="80%" stop-color="var(--slag-hot)"/>
                <stop offset="100%" stop-color="transparent"/>
              </linearGradient>
              <linearGradient id="edge-glow-v" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="transparent"/>
                <stop offset="20%" stop-color="var(--slag-hot)"/>
                <stop offset="50%" stop-color="var(--slag-bright)"/>
                <stop offset="80%" stop-color="var(--slag-hot)"/>
                <stop offset="100%" stop-color="transparent"/>
              </linearGradient>
              <filter id="glow-blur">
                <feGaussianBlur stdDeviation="2" result="blur"/>
                <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <rect class="edge-glow edge-top" x="5" y="0" width="90" height="1" fill="url(#edge-glow-h)" filter="url(#glow-blur)"/>
            <rect class="edge-glow edge-bottom" x="5" y="99" width="90" height="1" fill="url(#edge-glow-h)" filter="url(#glow-blur)"/>
            <rect class="edge-glow edge-left" x="0" y="5" width="1" height="90" fill="url(#edge-glow-v)" filter="url(#glow-blur)"/>
            <rect class="edge-glow edge-right" x="99" y="5" width="1" height="90" fill="url(#edge-glow-v)" filter="url(#glow-blur)"/>
          </svg>
          <!-- Flying Sparks -->
          <div class="spark spark-1"></div><div class="spark spark-2"></div><div class="spark spark-3"></div>
          <div class="spark spark-4"></div><div class="spark spark-5"></div><div class="spark spark-6"></div>
          <div class="spark spark-7"></div><div class="spark spark-8"></div><div class="spark spark-9"></div>
          <div class="spark spark-10"></div><div class="spark spark-11"></div><div class="spark spark-12"></div>
          <!-- Floating Embers -->
          <div class="ember ember-1"></div><div class="ember ember-2"></div><div class="ember ember-3"></div>
          <div class="ember ember-4"></div><div class="ember ember-5"></div><div class="ember ember-6"></div>
        </div>

        <!-- Logo - div instead of pre (no gray bg) -->
        <div class="hero-logo"><span style="color: var(--slag-cold);">‚ñë‚ñë‚ñë</span><span style="color: var(--slag-warm);">‚ñí</span><span style="color: var(--slag-hot);">‚ñí</span><span style="color: var(--slag-bright);">‚ñì</span><span style="color: var(--slag-pure);">‚ñà</span>  <span style="color: var(--slag-pure); font-weight: bold;">SLAG</span>  <span style="color: var(--slag-pure);">‚ñà</span><span style="color: var(--slag-bright);">‚ñì</span><span style="color: var(--slag-hot);">‚ñí</span><span style="color: var(--slag-warm);">‚ñí</span><span style="color: var(--slag-cold);">‚ñë‚ñë‚ñë</span></div>
        <p style="color: var(--slag-pure); margin-top: 1lh; font-size: 1.1rem; font-weight: bold; text-align: center; position: relative; z-index: 1;">Smelt ideas, skim the bugs, forge the product.</p>
        <p style="margin-top: 0.5lh; color: var(--foreground1); text-align: center; position: relative; z-index: 1;">Task orchestrator for AI-powered development. Breaks requirements into S-expression ingots and forges them via Claude agents with automatic retry, re-smelt recovery, and proof-based verification.</p>
        <div class="temp-bar workflow-bar" style="margin-top: 1.5lh; text-align: center; position: relative; z-index: 1;">
          <span class="workflow-item workflow-ore"><span style="color: var(--slag-cold);">üß±</span> ore</span>
          <span class="workflow-arrow">‚Üí</span>
          <span class="workflow-item workflow-forge"><span style="color: var(--slag-hot);">üî•</span> forge</span>
          <span class="workflow-arrow">‚Üí</span>
          <span class="workflow-item workflow-done"><span style="color: var(--slag-pure);">‚úÖ</span> done</span>
          <span class="workflow-arrow">‚Üí</span>
          <span class="workflow-item workflow-fail"><span style="color: var(--slag-warm);">‚ùå</span> fail?</span>
          <span class="workflow-arrow">‚Üí</span>
          <span class="workflow-item workflow-resmelt"><span style="color: var(--slag-hot);">‚ôªÔ∏è</span> re-smelt</span>
          <span class="workflow-arrow">‚Ü©</span>
        </div>
      </header>

      <div is="separator"></div>

      <!-- S2: INSTALL -->
      <section>
        <h2>Install</h2>
        <div class="install-hero" box="double">
          <div class="cmd-line">
            <code data-copy style="font-size: 1.1rem;">curl -sSf https://slag.dev/install.sh | sh</code>
          </div>
          <p style="color: var(--foreground2); font-size: 0.85rem; margin-top: 0.5lh;">One-liner that downloads the binary and adds to PATH</p>
        </div>
        <details style="margin-top: 1lh;">
          <summary style="color: var(--foreground2); cursor: pointer;">Other installation methods</summary>
          <div class="quickstart-box" box="square" style="margin-top: 0.5lh;">
            <div class="cmd-line">
              <span class="cmd-comment"># bash version (no build required)</span>
              <code data-copy>curl -fsSL https://slag.dev/slag.sh -o /usr/local/bin/slag && chmod +x /usr/local/bin/slag</code>
            </div>
            <div class="cmd-line">
              <span class="cmd-comment"># from source</span>
              <code data-copy>cargo install --git https://github.com/sliday/slag</code>
            </div>
          </div>
        </details>
      </section>

      <div is="separator"></div>

      <!-- S3: QUICK START -->
      <section>
        <h2>Quick Start</h2>
        <div class="quickstart-box" box="square">
          <div class="cmd-line">
            <span class="cmd-comment"># write your requirements</span>
            <code data-copy>cat > PRD.md &lt;&lt; 'EOF'
Build a REST API with auth and rate limiting
EOF</code>
          </div>
          <div class="cmd-line">
            <span class="cmd-comment"># forge</span>
            <code data-copy>slag "Build the REST API from PRD.md"</code>
          </div>
        </div>
        <p class="disclaimer"><span style="color: var(--slag-warm);">&#x26A0;</span> slag gives Claude autonomous shell access. Use in a dedicated directory or container.</p>
      </section>

      <div is="separator"></div>

      <!-- S4: PIPELINE DIAGRAM -->
      <section class="diagram">
        <h2>Pipeline</h2>
<pre box="square">
  PRD.md                                          PROGRESS.md
  <span style="color:var(--slag-warm);">(ore)</span>                                             <span style="color:var(--slag-pure);">(ledger)</span>
    |                                                 ^
    v                                                 |
 <span style="color:var(--slag-cold);">+-----------+</span>    <span style="color:var(--slag-cold);">+--------------+</span>    <span style="color:var(--slag-cold);">+--------+</span>    <span style="color:var(--slag-cold);">+-------+</span>
 <span style="color:var(--slag-cold);">|</span> <span style="color:var(--slag-bright);">SURVEYOR</span>  <span style="color:var(--slag-cold);">|</span>--->| <span style="color:var(--slag-bright);">FOUNDER</span>      <span style="color:var(--slag-cold);">|</span>--->| <span style="color:var(--slag-bright);">FORGE</span>  <span style="color:var(--slag-cold);">|</span>--->| <span style="color:var(--slag-bright);">ASSAY</span> <span style="color:var(--slag-cold);">|</span>
 <span style="color:var(--slag-cold);">|</span> analyze   <span style="color:var(--slag-cold);">|</span>    <span style="color:var(--slag-cold);">|</span> cast ingots  <span style="color:var(--slag-cold);">|</span>    <span style="color:var(--slag-cold);">|</span> strike <span style="color:var(--slag-cold);">|</span>    <span style="color:var(--slag-cold);">|</span> report<span style="color:var(--slag-cold);">|</span>
 <span style="color:var(--slag-cold);">+-----------+</span>    <span style="color:var(--slag-cold);">+--------------+</span>    <span style="color:var(--slag-cold);">+--------+</span>    <span style="color:var(--slag-cold);">+-------+</span>
    |                    |                    |
    v                    v                    v
 BLUEPRINT.md        PLAN.md             git commits
 <span style="color:var(--foreground1);">(analysis)</span>        <span style="color:var(--foreground1);">(s-expr ingots)</span>      <span style="color:var(--foreground1);">(per ingot)</span>
</pre>
      </section>

      <div is="separator"></div>

      <!-- S5: FORGE LOOP DETAIL -->
      <section class="diagram">
        <h2>Forge Loop</h2>
<pre box="square">
 <span style="color:var(--slag-bright);">PICK ORE</span>                       <span style="color:var(--slag-bright);">PARALLEL ANVILS</span>
    |                           +---------+---------+
    v                           |         |         |
 :solo t? ----yes-----> <span style="color:var(--slag-hot);">ANVIL 1</span>   <span style="color:var(--slag-hot);">ANVIL 2</span>   <span style="color:var(--slag-hot);">ANVIL 3</span>
    |                      |         |         |
    no                     v         v         v
    |                   (each anvil is independent subshell)
    v
 <span style="color:var(--slag-bright);">SELECT SMITH</span> by :skill + :grade
    |
    |  web/frontend --> +Playwright
    |  grade >= 3   --> plan mode
    |  default      --> base tools
    v
 <span style="color:var(--slag-hot);">STRIKE</span> (claude invocation)
    |
    v
 <span style="color:var(--slag-cold);">CMD</span> (extract & run shell command)
    |
    v
 <span style="color:var(--slag-bright);">PROOF</span> (run :proof shell command)
    |
    +----- pass ----> <span style="color:var(--slag-pure);">:forged</span>  + git commit
    |
    +----- fail ----> :heat++ retry with slag feedback
    |
    +----- max -----> <span style="color:var(--slag-warm);">RE-SMELT</span> (analyze failure)
                         |
                         +----- rewrite --> new ore (retry)
                         +----- split ----> sub-ingots (2-4)
                         +----- impossible -> <span style="color:var(--slag-warm);">:cracked</span>
</pre>
      </section>

      <div is="separator"></div>

      <!-- S6: FOUR PHASES -->
      <section>
        <h2>Four Phases</h2>
        <div class="phase-grid">
          <div class="phase-card" box="square">
            <div>
              <span is="badge" class="ore phase-num">1</span>
              <span class="phase-name">SURVEYOR</span>
            </div>
            <p class="phase-desc">Deep analysis with plan mode. Reads PRD.md (ore), produces BLUEPRINT.md with architecture, dependency graph, risk assessment, and forging sequence. Self-iterates to resolve any ambiguity.</p>
          </div>
          <div class="phase-card" box="square">
            <div>
              <span is="badge" class="molten phase-num">2</span>
              <span class="phase-name">FOUNDER</span>
            </div>
            <p class="phase-desc">Casts S-expression ingots from the blueprint. Each ingot has an ID, complexity grade, skill tag, proof command, and work description. Outputs PLAN.md as the crucible.</p>
          </div>
          <div class="phase-card" box="square">
            <div>
              <span is="badge" class="forged phase-num">3</span>
              <span class="phase-name">FORGE</span>
            </div>
            <p class="phase-desc">Strikes each ingot via Claude. Solo ingots run on parallel anvils (up to 3). Selects smith by skill and grade. Retries with slag feedback on failure. Commits on success.</p>
          </div>
          <div class="phase-card" box="square">
            <div>
              <span is="badge" class="forged phase-num">4</span>
              <span class="phase-name">ASSAY</span>
            </div>
            <p class="phase-desc">Final quality report. Shows forged/cracked counts, temperature bar, and identifies any cracked ingots. Exits 0 on full forge, 1 if any ingot cracked.</p>
          </div>
        </div>
      </section>

      <div is="separator"></div>

      <!-- S7: DESIGN DECISIONS -->
      <section class="decisions">
        <h2>Design Decisions</h2>

        <details box="square">
          <summary>Why S-Expressions?</summary>
          <p>S-expressions are single-line, grep/sed parseable, require zero dependencies, and survive bash string handling. Every ingot is one line in PLAN.md. The entire orchestrator can manipulate state with sed_i without any JSON/YAML parser. Fields are keyword-prefixed (:id, :status) making them unambiguous to extract with pattern matching.</p>
        </details>

        <details box="square">
          <summary>Why Parallel Anvils?</summary>
          <p>Independent ingots (:solo t) run concurrently in background subshells, up to MAX_ANVILS=3. This gives 3x throughput for foundation tasks that have no dependencies. Each anvil gets its own smith process. Sequential ingots (:solo nil) run one at a time after parallel work completes.</p>
        </details>

        <details box="square">
          <summary>Why Proof-Based Verification?</summary>
          <p>Every ingot carries a :proof field containing a shell command. Exit code 0 means pass, anything else means fail. No human review needed. Proofs are concrete: "test -f file", "npm test", "grep -q pattern file". This enables fully autonomous forging with machine-verifiable quality gates.</p>
        </details>

        <details box="square">
          <summary>Why Self-Iteration?</summary>
          <p>When a surveyor or founder output contains questions, slag detects them and feeds the output back with instructions to resolve autonomously. Up to 3 rounds. This prevents the forge from stalling on ambiguity. The AI is instructed to make expert decisions rather than ask for clarification.</p>
        </details>

        <details box="square">
          <summary>Why Re-Smelt?</summary>
          <p>When an ingot cracks after exhausting all heats, re-smelting analyzes the failure logs, blueprint, and git history to diagnose the root cause. It can rewrite the ingot with corrected work/proof, split it into 2-4 focused sub-ingots, or declare it impossible. Each ingot gets one re-smelt attempt &mdash; learning from failure instead of brute-forcing retries.</p>
        </details>

        <details box="square">
          <summary>Why Metallurgical Metaphor?</summary>
          <p>Unambiguous vocabulary that maps naturally to the pipeline. Ore (raw input) is surveyed, cast into ingots, heated in a forge, and either becomes forged steel or cracked waste. Every term has exactly one meaning. The temperature gradient (cold &rarr; hot &rarr; pure) maps to progress from unstarted to complete.</p>
        </details>
      </section>

      <div is="separator"></div>

      <!-- S8: FAQ -->
      <section class="decisions">
        <h2>FAQ</h2>

        <details box="square">
          <summary>"command not found: slag" after install</summary>
          <p>The installer adds <code>~/.slag/bin</code> to your shell profile automatically. Open a new terminal or run:</p>
          <pre style="margin-top: 0.5lh; padding: 1ch; background: var(--background1);"><code>source ~/.zshrc  # or ~/.bashrc</code></pre>
          <p style="margin-top: 0.5lh;">If that doesn't work, manually add to your profile: <code>export PATH="$HOME/.slag/bin:$PATH"</code></p>
        </details>

        <details box="square">
          <summary>How do I update slag?</summary>
          <p>Run <code>slag update</code> to self-update to the latest release. This downloads the new binary from GitHub and replaces the current one.</p>
        </details>

        <details box="square">
          <summary>What's the difference between binary and bash versions?</summary>
          <p>The Rust binary is faster, has better error handling, and includes self-update. The bash script is a single file with no build step &mdash; useful if you can't install Rust or want to inspect/modify the orchestrator directly.</p>
        </details>

        <details box="square">
          <summary>Do I need Claude CLI installed?</summary>
          <p>Yes. slag invokes <code>claude</code> via CLI. Install it from <a href="https://docs.anthropic.com/en/docs/claude-code">docs.anthropic.com</a> and ensure it's in your PATH.</p>
        </details>
      </section>

      <div is="separator"></div>

      <!-- S9: INGOT EXAMPLES (JS-rendered) -->
      <section>
        <h2>Ingot Examples</h2>
        <div id="ingot-display" class="ingot-list"></div>
      </section>

      <div is="separator"></div>

      <!-- S10: FIELD REFERENCE -->
      <section>
        <h2>Field Reference</h2>
        <table class="field-table">
          <thead>
            <tr>
              <th>Field</th>
              <th>Values</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>:id</code></td>
              <td>"i1", "i2", ...</td>
              <td>Unique ingot identifier</td>
            </tr>
            <tr>
              <td><code>:status</code></td>
              <td>ore | molten | forged | cracked</td>
              <td>Lifecycle state</td>
            </tr>
            <tr>
              <td><code>:solo</code></td>
              <td>t | nil</td>
              <td>Can run in parallel (t) or must be sequential (nil)</td>
            </tr>
            <tr>
              <td><code>:grade</code></td>
              <td>1-5</td>
              <td>Complexity level; grade &ge; 3 uses plan mode</td>
            </tr>
            <tr>
              <td><code>:skill</code></td>
              <td>web | api | cli | default</td>
              <td>Selects smith tools/plugins</td>
            </tr>
            <tr>
              <td><code>:heat</code></td>
              <td>0-N</td>
              <td>Current retry attempt</td>
            </tr>
            <tr>
              <td><code>:max</code></td>
              <td>5-8+</td>
              <td>Max retries before cracking</td>
            </tr>
            <tr>
              <td><code>:smelt</code></td>
              <td>0-1</td>
              <td>Re-smelt count (0 = never re-smelted, 1 = re-smelted once)</td>
            </tr>
            <tr>
              <td><code>:proof</code></td>
              <td>shell command</td>
              <td>Acceptance test (exit 0 = pass)</td>
            </tr>
            <tr>
              <td><code>:work</code></td>
              <td>string</td>
              <td>Task description for the smith</td>
            </tr>
          </tbody>
        </table>
      </section>

      <div is="separator"></div>

      <!-- S11: PROGRESS DISPLAY -->
      <section>
        <h2>Progress Display</h2>
        <p>slag uses emoji indicators to show ingot status at a glance:</p>
        <div class="quickstart-box" box="square">
          <div class="cmd-line">
            <code style="font-size: 1.1rem;">[ <span style="color: var(--slag-pure);">‚úÖ</span>3  <span style="color: var(--slag-hot);">üî•</span>1  <span style="color: var(--slag-cold);">üß±</span>5 ] 37%</code>
          </div>
        </div>
        <table class="field-table progress-table" style="margin-top: 1lh;">
          <thead>
            <tr>
              <th>Emoji</th>
              <th>Status</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><span style="color: var(--slag-warm);">üî∂</span></td>
              <td>queued</td>
              <td>Ingot is ore, waiting to be forged</td>
            </tr>
            <tr>
              <td><span style="color: var(--slag-hot);">üî•</span></td>
              <td>forging</td>
              <td>Ingot is molten, currently being worked</td>
            </tr>
            <tr>
              <td><span style="color: var(--slag-pure);">‚úÖ</span></td>
              <td>done</td>
              <td>Ingot is forged, proof passed</td>
            </tr>
            <tr>
              <td><span style="color: var(--slag-warm);">‚ùå</span></td>
              <td>failed</td>
              <td>Ingot cracked after exhausting all heats</td>
            </tr>
          </tbody>
        </table>
        <p style="margin-top: 1lh;">The percentage shows overall progress: forged ingots √∑ total ingots.</p>
      </section>

      <div is="separator"></div>

      <!-- S12: FOOTER -->
      <footer class="footer" box="square">
        <div class="temp-bar" style="margin-top:0; margin-bottom: 0.5lh;">
          <span style="color: var(--slag-cold);">&#x25B1;&#x25B1;&#x25B1;</span><span style="color: var(--slag-warm);">&#x25B0;</span><span style="color: var(--slag-hot);">&#x25B0;</span><span style="color: var(--slag-bright);">&#x25B0;</span><span style="color: var(--slag-pure);">&#x25B0;</span>
        </div>
        <p style="color: var(--foreground2);">
          <a href="https://github.com/sliday/slag">GitHub</a>
          &middot;
          <a href="/slag.sh" download="slag.sh">Download (bash)</a>
          &middot;
          <a href="https://github.com/sliday/slag/releases">Releases (binary)</a>
          &middot;
          MIT License
        </p>
        <p style="color: var(--foreground2); margin-top: 0.5lh; font-size: 0.75rem;">
          Made by <a href="https://x.com/stas_kulesh" target="_blank" rel="noopener noreferrer">@stas_kulesh</a> <a href="https://aichess.co/static/easter-egg/index.html" class="easter-egg" title="üéÉ">üêá</a>
        </p>
      </footer>

    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
